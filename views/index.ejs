<!doctype html>
<html lang="ko" data-bs-theme="dark">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>íŒì í¬ë¦¬í‹±</title>

    <!-- BootStrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <!--  My Stylesheet  -->
    <link rel="stylesheet" type="text/css" href="/style/r_style.css">

    <!--  JQuery  -->
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand navbar-light fixed-top r-navbar r-bg-primary not-draggable" id="navbar">
        <div class="container-fluid align-text-bottom">
            <a class="navbar-brand" href="/">
                <img src="/img/logo-sm.png" alt="" width="30" height="30" style="margin: 0;"
                    class="d-inline-block align-text-top not-draggable-img"></a>
            <div class="collapse navbar-collapse scroll-horiz scroll-no-bar" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link r-active r-nav-link" aria-current="page" href="#overview">í†ºì•„ë³´ê¸°</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link r-nav-link" href="#uploads">ì—…ë¡œë“œ</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link r-nav-link" href="#promises">ì•½ì†</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link r-nav-link" href="#assesments">ê°œë°¥ê·¸ë¦‡</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div data-bs-spy="scroll" data-bs-target="#navbar" data-bs-smooth-scroll="true">

        <div class="container mt-7 d-flex justify-content-center" style="max-width: 640px;" id="overview">
            <img class="img-fluid" src="/img/cover.png">
        </div>

        <!-- Overview -->
        <div class="container mt-7" style="max-width: 640px;" id="overview">
            <h1>í†ºì•„ë³´ê¸°</h1>
            <div class="card-neumorph p-3 mt-4">
                <h2>ì‹¤ì‹œê°„ ì´ì </h2>
                <span style="font-size: 8em;">
                    <%= totalScore.toFixed(1) %>ì 
                </span>
                <br>
                <span>ì ìˆ˜ ë³´ì •ì¹˜ <%= calibrate %>ì ì´ ì ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤.</span>
                <br>
                <br>
                <div class="progress-stacked">
                    <div class="progress" role="progressbar" aria-label="Segment one"
                        aria-valuenow="<%= uploadScore / 3.0 %>" aria-valuemin="0" aria-valuemax="100"
                        style="width: <%= uploadScore / 3.0 %>%">
                        <div class="progress-bar"></div>
                    </div>
                    <div class="progress" role="progressbar" aria-label="Segment two"
                        aria-valuenow="<%= promiseScore / 3.0 %>" aria-valuemin="0" aria-valuemax="100"
                        style="width: <%= promiseScore / 3.0 %>%">
                        <div class="progress-bar bg-success"></div>
                    </div>
                    <div class="progress" role="progressbar" aria-label="Segment three"
                        aria-valuenow="<%= likeScore / 3.0 %>" aria-valuemin="0" aria-valuemax="100"
                        style="width: <%= likeScore / 3.0 %>%">
                        <div class="progress-bar bg-info"></div>
                    </div>
                </div>
                <ul class="list-group mt-3">
                    <li class="list-group-item d-flex justify-content-between align-items-start">
                        <div class="ms-2 me-auto">
                            <div class="ms-2 me-auto">ì´ë‹¬ ì—…ë¡œë“œ</div>
                        </div>
                        <span class="badge bg-primary rounded-pill">
                            <%= uploads.length %>
                        </span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-start">
                        <div class="ms-2 me-auto">
                            <div class="ms-2 me-auto">ì•½ì†</div>
                        </div>
                        <span class="badge bg-primary rounded-pill">
                            <%= promiseDone[0].count + promiseHalf[0].count %> / <%= promiseDone[0].count +
                                    promiseHalf[0].count + promiseFail[0].count %>
                        </span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-start">
                        <div class="ms-2 me-auto">
                            <div class="ms-2 me-auto">ê°œë°¥ê·¸ë¦‡ í‰ê°€</div>
                        </div>
                        <span class="badge bg-primary rounded-pill">
                            <% if (likeScore>= 80) { %>
                                ì••ë„ì ìœ¼ë¡œ ê¸ì •ì 
                                <% } else if (likeScore>= 60) { %>
                                    ê¸ì •ì 
                                    <% } else if (likeScore>= 40) { %>
                                        ë³µí•©ì 
                                        <% } else if (likeScore>= 20) { %>
                                            ë¶€ì •ì 
                                            <% } else { %>
                                                ì••ë„ì ìœ¼ë¡œ ë¶€ì •ì 
                                                <% } %>
                        </span>
                    </li>
                </ul>
            </div>
        </div>

        <!-- Uploads -->
        <div class="container mt-7" style="max-width: 640px;" id="uploads">
            <h1>ì˜ìƒ ì—…ë¡œë“œ</h1>
            <div class="card-neumorph p-3 mt-4">
                <h2>ì´ë‹¬ ì—…ë¡œë“œ</h2>
                <span style="font-size: 6em;">
                    <% uploads.length %>
                </span>
                <div class="progress" role="progressbar" aria-label="Info example" aria-valuenow="<%= uploadScore %>"
                    aria-valuemin="0" aria-valuemax="100">
                    <div class="progress-bar bg-info" style="width: <%= uploadScore %>%"></div>
                </div>

                <ul class="list-group mt-3">
                    <% for (var i=0; i < uploads.length; i++) { %>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                <div class="ms-2 me-auto"><a class="btn-link" href="<%= uploads[i].url %>">
                                        <%= uploads[i].title %>
                                    </a></div>
                            </div>
                        </li>
                        <% } %>
                </ul>
            </div>
        </div>

        <!-- Promise -->
        <div class="container mt-7" style="max-width: 640px;" id="promises">
            <h1>ì•½ì†</h1>
            <div class="card-neumorph p-3 mt-4">
                <h2>ì§€í‚¨ ì•½ì†</h2>
                <span style="font-size: 6em;">
                    <%= promiseDone[0].count + promiseHalf[0].count %>
                </span>
                <div class="progress-stacked">
                    <div class="progress" role="progressbar" aria-label="Segment one"
                        aria-valuenow="<%= promiseDone == 0 ? 0 : promiseDone.count / (promiseDone[0].count + promiseHalf[0].count + promiseFail[0].count) * 100 %>"
                        aria-valuemin="0" aria-valuemax="100"
                        style="width: <%= promiseDone == 0 ? 0 : promiseDone.count / (promiseDone[0].count + promiseHalf[0].count + promiseFail[0].count) * 100 %>%">
                        <div class="progress-bar"></div>
                    </div>
                    <div class="progress" role="progressbar" aria-label="Segment one"
                        aria-valuenow="<%= promiseDone == 0 ? 0 : promiseHalf.count / (promiseDone[0].count + promiseHalf[0].count + promiseFail[0].count) * 100 %>"
                        aria-valuemin="0" aria-valuemax="100"
                        style="width: <%= promiseDone == 0 ? 0 : promiseHalf.count / (promiseDone[0].count + promiseHalf[0].count + promiseFail[0].count) * 100 %>%">
                        <div class="progress-bar bg-warning"></div>
                    </div>
                    <div class="progress" role="progressbar" aria-label="Segment two"
                        aria-valuenow="<%= promiseDone == 0 ? 0 : promiseFail.count / (promiseDone[0].count + promiseHalf[0].count + promiseFail[0].count) * 100 %>"
                        aria-valuemin="0" aria-valuemax="100"
                        style="width: <%= promiseDone == 0 ? 0 : promiseFail.count / (promiseDone[0].count + promiseHalf[0].count + promiseFail[0].count) * 100 %>%">
                        <div class="progress-bar bg-danger"></div>
                    </div>
                </div>
                <br>
                <span class="mt-3">ìµœê·¼ ì•½ì†</span>
                <ul class="list-group mt-1">
                    <% for (var i=0; i < promiseTop.length; i++) { %>
                        <li class="list-group-item d-flex justify-content-between align-items-start">
                            <div class="ms-2 me-auto">
                                <div class="ms-2 me-auto">
                                    <div class="fw-bold"><%= promiseTop[i].promise %></div>
                                    <% if (promiseTop[i].report && promiseTop[i].report !== "") { %>
                                        <%= promiseTop[i].report %>
                                    <% } %>
                                </div>
                            </div>
                            <span class="badge bg-primary rounded-pill">
                                <% switch (promiseTop[i].status) { case 0: %>ì•ˆì§€í‚´
                                    <% break; case 1: %>ë°˜ë§Œ ì§€í‚´
                                        <% break; case 2: %>ì§€í‚´
                                            <% break; } %>
                            </span>
                        </li>
                        <% } %>
                </ul>
            </div>
        </div>

        <!-- Assesment -->
        <div class="container mt-7" style="max-width: 640px;" id="assesments">
            <h1>ê°œë°¥ê·¸ë¦‡</h1>
            <div class="card-neumorph p-3 mt-4">
                <h2>ì¢‹ì•„ìš”/í‚¹ë°›ì•„ìš”</h2>
                <span style="font-size: 6em;">
                    <% if (likeScore>= 80) { %>
                        ì••ë„ì ìœ¼ë¡œ<br>ê¸ì •ì 
                        <% } else if (likeScore>= 60) { %>
                            ê¸ì •ì 
                            <% } else if (likeScore>= 40) { %>
                                ë³µí•©ì 
                                <% } else if (likeScore>= 20) { %>
                                    ë¶€ì •ì 
                                    <% } else { %>
                                        ì••ë„ì ìœ¼ë¡œ<br>ë¶€ì •ì 
                                        <% } %>
                </span>
                <div class="progress-stacked">
                    <div class="progress" role="progressbar" aria-label="Segment one"
                        aria-valuenow="<%= parseFloat(likes[0].count) / (likes[0].count + sads[0].count) * 100 %>"
                        aria-valuemin="0" aria-valuemax="100"
                        style="width: <%= parseFloat(likes[0].count) / (likes[0].count + sads[0].count) * 100 %>%">
                        <div class="progress-bar">ì¢‹ì•„ìš” <%= likes[0].count %></div>
                    </div>
                    <div class="progress" role="progressbar" aria-label="Segment one"
                        aria-valuenow="<%= parseFloat(sads[0].count) / (likes[0].count + sads[0].count) * 100 %>"
                        aria-valuemin="0" aria-valuemax="100"
                        style="width: <%= parseFloat(sads[0].count) / (likes[0].count + sads[0].count) * 100 %>%">
                        <div class="progress-bar bg-warning">í‚¹ë°›ì•„ìš” <%= sads[0].count %></div>
                    </div>
                </div>
            </div>

            <div class="card-neumorph p-3 mt-4">
                <h2>íˆ¬í‘œí•´ì£¼ì„¸ìš”!</h2>
                <span>íˆ¬í‘œëŠ” ì´ì ì—ë„ ë°˜ì˜ë˜ì–´ìš”!</span>
                <br>
                <span>íˆ¬í‘œëŠ” ì·¨ì†Œí•  ìˆ˜ ì—†ê³ , í•˜ë£¨ì— ë‹¤ì„¯ ë²ˆë§Œ ëˆ„ë¥¼ ìˆ˜ ìˆì–´ìš”</span>
                <br>
                <div class="btn-group mt-3" role="group" aria-label="Basic mixed styles example">
                    <a class="btn btn-primary" href="/like">ğŸ¥° ì¢‹ì•„ìš”</a>
                    <a class="btn btn-warning" href="/sad">ğŸ”¥ í‚¹ë°›ì•„ìš”</a>
                </div>
            </div>
        </div>
    </div>

    <!--  Footer  -->
    <div class="container footer mt-7">
        
    </div>

    <!-- BootStrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>

    <!-- Script -->
    <script type="text/javascript">
        //https://stackoverflow.com/questions/63082529/how-to-properly-introduce-a-light-dark-mode-in-bootstrap
        // Set theme to the user's preferred color scheme
        function updateTheme() {
            const colorMode = window.matchMedia("(prefers-color-scheme: dark)").matches ?
                "dark" :
                "light";
            document.querySelector("html").setAttribute("data-bs-theme", colorMode);
        }

        // Set theme on load
        updateTheme()

        // Update theme when the preferred scheme changes
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateTheme)
    </script>
</body>

</html>